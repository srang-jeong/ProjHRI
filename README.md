# 🤖 로봇 MBTI 진단 시스템 (ProjHRI)

**AI 기반 자동 해석 기능을 탑재한** MBTI 기반 인간-로봇 상호작용(HRI) 진단 및 분석 시스템입니다. 사용자의 MBTI 유형을 분석하여 로봇과의 최적 상호작용 방식을 제안하고, **모든 분석 결과를 자동으로 해석**하여 실용적인 인사이트를 제공합니다.

## 📋 목차

- [주요 기능](#-주요-기능)
- [설치 및 실행](#-설치-및-실행)
- [사용 방법](#-사용-방법)
- [기능 상세](#-기능-상세)
- [데이터베이스 설정](#-데이터베이스-설정)
- [기술 스택](#-기술-스택)
- [프로젝트 구조](#-프로젝트-구조)

## ✨ 주요 기능

### 🧠 MBTI 진단 시스템
- **16가지 MBTI 유형 진단**: 정확한 MBTI 유형 분석
- **장소별 특화 설문**: 병원, 도서관, 쇼핑몰, 학교, 공항별 맞춤 질문 (총 17개 질문)
- **HRI 상호작용 스타일**: 각 MBTI 유형별 5가지 시나리오 예시 제공
- **중복 진단 방지**: 24시간 내 중복 진단 자동 감지 및 방지
- **실시간 결과 분석**: 즉시 MBTI 결과 및 상호작용 가이드 제공

### 🤖 AI 기반 자동 해석 시스템 ⭐ **NEW**
- **히트맵 패턴 자동 분석**: 그룹별 MBTI 분포 패턴을 자동으로 감지하고 해석
- **상관관계 패턴 해석**: MBTI 유형 간 상관관계를 자동으로 분석하고 의미 설명
- **네트워크 분석 해석**: MBTI 네트워크의 중심 허브, 클러스터 패턴 자동 분석
- **시간대별 패턴 해석**: 진단 시간 패턴을 분석하여 사용자 행동 인사이트 제공
- **MBTI 변화 분석**: 개인별 MBTI 변화 패턴을 추적하고 의미 해석
- **통계적 유의성 분석**: 카이제곱 검정, 효과 크기 등 과학적 분석 결과 제공
- **다양성 지수 분석**: Shannon, Simpson 지수를 통한 MBTI 다양성 평가

### 📊 고급 데이터 분석 및 시각화
- **트렌드 분석**: 기간별 MBTI 분포 및 변화 추이 (라인/바/영역 차트)
- **집단별 분석**: 성별, 연령대, 직업별 MBTI 분포 분석 (바/파이/히트맵)
- **로봇 이력 관리**: 개별 로봇별 진단 이력 및 MBTI 변화 타임라인
- **MBTI 네트워크 분석**: MBTI 유형 간 관계 및 연결성 시각화
- **상관관계 히트맵**: MBTI 유형 간 상관관계 매트릭스 시각화
- **실시간 데이터 새로고침**: 최신 데이터 반영을 위한 수동 새로고침 기능

### 🔧 관리자 기능
- **데이터 관리**: 전체 진단 데이터 조회 및 관리
- **중복 데이터 정리**: 중복 진단 데이터 자동 감지 및 정리
- **통계 리포트**: 상세한 진단 통계 및 분석 리포트
- **데이터 내보내기**: CSV, JSON 형태로 데이터 내보내기
- **디버깅 정보**: 데이터 로딩 상태 및 사용자별 로봇 조합 확인

## 🚀 설치 및 실행

### 1. 환경 설정
```bash
# 필요한 패키지 설치
pip install -r requirements.txt
```

### 2. 환경 변수 설정
`.env` 파일을 생성하고 다음 정보를 입력하세요:
```
SUPABASE_URL=your_supabase_url
SUPABASE_KEY=your_supabase_key
```

### 3. 데이터베이스 설정
Supabase SQL Editor에서 다음 스크립트를 실행하세요:

```sql
-- responses 테이블 업데이트
ALTER TABLE responses ADD COLUMN IF NOT EXISTS diagnosis_session_id TEXT;

-- user_robots 테이블 생성
CREATE TABLE IF NOT EXISTS user_robots (
    id SERIAL PRIMARY KEY,
    user_id TEXT NOT NULL,
    robot_name TEXT NOT NULL,
    robot_description TEXT DEFAULT '',
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### 4. 애플리케이션 실행
```bash
streamlit run mbti_16_analysis_fixed.py
```

## 📖 사용 방법

### 1. 사용자 등록
- 사용자 ID 입력 (2-20자, 영문/한글/숫자)
- 성별, 연령대, 직업 정보 설정

### 2. 로봇 등록
- 로봇 ID 등록 (예: 내식기1, 로봇A)
- 여러 로봇 등록 가능

### 3. 진단 진행
- 진단 장소 선택 (일반, 병원, 도서관, 쇼핑몰, 학교, 공항)
- 장소별 특화 질문 응답 (총 17개 질문)
- MBTI 결과 확인 및 가이드 제공

### 4. 결과 분석
- 개인별 진단 이력 확인
- 로봇별 상호작용 패턴 분석
- MBTI 변화 추이 시각화

## 🔍 기능 상세

### 🤖 AI 자동 해석 시스템의 특징

#### **🎯 포괄적 분석**
- **모든 주요 분석 결과**에 자동 해석 제공
- **맥락적 해석**: 각 분석의 특성에 맞는 전문적 해석
- **실용적 인사이트**: 로봇 상호작용 설계에 바로 활용 가능한 정보

#### **📊 통계적 근거**
- **과학적 방법론** 기반의 신뢰할 수 있는 해석
- **카이제곱 검정**, **효과 크기 분석** 등 통계적 유의성 검증
- **다양성 지수** (Shannon, Simpson)를 통한 객관적 평가

#### **🔍 자동 해석 예시**
```
🔄 MBTI 변화 분석:
• 총 변화 횟수: 3번
• 주요 변화 패턴: 정보 처리 변화 (2회)
• 변화 주기: 평균 15.3일 → 점진적 선호도 변화
📊 변화가 의미하는 것:
• 선택적 변화: 특정 상황에서만 상호작용 방식 변경
• 안정성: 기본적인 선호도는 유지하면서 부분적 조정
🎯 축별 변화 패턴:
• S/N 축 (2회): 감각/직관 - 정보 처리 및 학습 방식 변화가 가장 활발
• 안정적 축: E/I, T/F - 일관된 선호도 유지
```

### 🏥 장소별 특화 설문

#### **병원 환경**
- 환자 정보 확인 및 신뢰성 검증
- 의료진과의 협력 상호작용
- 치료 과정 안내 및 모니터링
- 응급 상황 대응

#### **도서관 환경**
- 도서 검색 및 추천 시스템
- 학습 환경 조성
- 도서 대출/반납 서비스
- 이용 규칙 안내

#### **쇼핑몰 환경**
- 상품 추천 및 정보 제공
- 할인 정보 및 쇼핑 가이드
- 매장 위치 안내
- 고객 서비스 제공

#### **학교 환경**
- 수업 보조 및 학습 지원
- 학생 질문 응답
- 그룹 활동 관리
- 과제 및 일정 관리

#### **공항 환경**
- 수하물 및 보안 검사 안내
- 항공편 정보 제공
- 여행 계획 및 일정 관리
- 긴급 상황 대응

### 📈 분석 기능

#### **📊 전체 트렌드 분석**
- 기간별 MBTI 분포 시각화 (라인/바/영역 차트)
- 빠른 기간 선택 (최근 7일, 30일, 3개월)
- **🔍 시간대별 패턴 자동 분석**: 피크 시간, 주중/주말 패턴, 진단 수 의미 해석

#### **📈 집단별 분석**
- 성별, 연령대, 직업별 MBTI 분포 (바/파이/히트맵)
- **🔍 히트맵 패턴 자동 분석**: 그룹별 우세 MBTI, 성별 차이, 직업별 특성 자동 감지
- **🔍 통계적 유의성 분석**: 카이제곱 검정, p-값, 효과 크기(Cramér's V) 분석
- **🔍 다양성 분석**: Shannon/Simpson 지수를 통한 MBTI 다양성 평가

#### **🤖 로봇 이력 관리**
- 개별 로봇별 진단 이력 및 MBTI 변화 타임라인
- **🔍 MBTI 변화 패턴 자동 분석**: 변화 횟수, 변화 유형, 변화 주기 분석
- **🔍 안정성 분석**: 일관된 MBTI vs 탐색적 변화 패턴 해석
- **🔍 축별 변화 분석**: E/I, S/N, T/F, J/P 축별 변화 빈도 및 의미

#### **🧠 고급 분석**
- **상관관계 분석**: MBTI 유형 간 상관관계 히트맵
  - **🔍 자동 해석**: 강한 양의/음의 상관관계, MBTI 축별 패턴 분석
- **네트워크 분석**: MBTI 유형 간 관계 및 연결성 시각화
  - **🔍 자동 해석**: 중심 허브 유형, 희소 유형, 클러스터 형성 패턴 분석
- **심화 분석**: MBTI 변화 패턴, 시간대별 분석 통합 제공

### 🔧 관리자 기능

#### **데이터 관리**
- 전체 진단 데이터 조회
- 필터링 및 검색 기능
- 중복 데이터 정리
- 데이터베이스 상태 모니터링

#### **통계 및 리포트**
- 총 진단 수, 고유 사용자 수
- MBTI 유형별 분포 통계
- CSV, JSON 형태 데이터 내보내기
- 상세 통계 리포트 생성

## 🗄️ 데이터베이스 설정

### Supabase 설정
1. Supabase 프로젝트 생성
2. 환경 변수 설정
3. 테이블 생성 스크립트 실행

### 테이블 구조
- **responses**: 진단 응답 데이터
- **user_robots**: 사용자별 로봇 정보

## 🛠️ 기술 스택

### Frontend
- **Streamlit**: 웹 애플리케이션 프레임워크
- **Plotly**: 인터랙티브 차트 및 시각화
- **Pandas**: 데이터 처리 및 분석

### Backend
- **Supabase**: 데이터베이스 및 인증
- **Python**: 백엔드 로직
- **NetworkX**: 네트워크 분석

### 데이터 분석 & AI
- **Scikit-learn**: 머신러닝 분석 (PCA, 클러스터링)
- **SciPy**: 통계 분석 (카이제곱 검정, 상관분석)
- **NetworkX**: 네트워크 분석 및 시각화
- **NumPy**: 수치 계산 및 다양성 지수 계산
- **Seaborn**: 고급 데이터 시각화

## 📁 프로젝트 구조

```
ProjHRI/
├── mbti_16_analysis_fixed.py    # 메인 애플리케이션
├── requirements.txt              # 의존성 패키지
├── .env                         # 환경 변수
├── README.md                    # 프로젝트 문서
├── create_user_robots_table.sql # 데이터베이스 스키마
├── update_database_schema.sql   # 스키마 업데이트
└── add_diagnosis_session_id.sql # 세션 ID 컬럼 추가
```

## 🔐 보안 기능

### 입력 검증
- 사용자 ID 및 로봇 ID 유효성 검사
- XSS 방지를 위한 입력 정제
- 특수문자 제한 및 길이 제한

### 데이터 보호
- 세션 기반 중복 진단 방지
- 진단 세션 ID를 통한 데이터 무결성 보장
- 관리자 권한 기반 데이터 접근 제어

## � 최신  업데이트 (v3.0)

### ⭐ 새로운 기능
- **AI 기반 자동 해석 시스템**: 모든 분석 결과를 자동으로 해석하여 실용적 인사이트 제공
- **MBTI 변화 분석**: 개인별 MBTI 변화 패턴 추적 및 의미 해석
- **통계적 유의성 분석**: 카이제곱 검정, 효과 크기 등 과학적 분석
- **다양성 지수 분석**: Shannon, Simpson 지수를 통한 객관적 다양성 평가
- **실시간 데이터 새로고침**: 최신 데이터 반영을 위한 수동 새로고침 기능
- **HRI 시나리오 확장**: 각 MBTI 유형별 5가지 상호작용 시나리오 제공

### 🔧 개선사항
- **사용자 경험 향상**: 복잡한 통계를 쉬운 언어로 자동 해석
- **데이터 시각화 개선**: 히트맵 해석 가이드 및 상관관계 분석 강화
- **성능 최적화**: 대용량 데이터 처리 및 차트 렌더링 성능 개선
- **보안 강화**: 입력 검증 및 XSS 방지 기능 강화

## 📊 성능 최적화

### 데이터베이스 최적화
- 인덱스 생성으로 쿼리 성능 향상
- 중복 데이터 자동 감지 및 정리
- 효율적인 데이터 구조 설계
- 실시간 데이터 새로고침 지원

### 시각화 최적화
- 대용량 데이터 처리 최적화
- 인터랙티브 차트 성능 개선
- 반응형 레이아웃 지원
- AI 기반 자동 해석으로 사용자 이해도 향상

## 🤝 기여하기

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## 📄 라이선스

이 프로젝트는 MIT 라이선스 하에 배포됩니다. 자세한 내용은 `LICENSE` 파일을 참조하세요.

## 📞 문의

프로젝트에 대한 문의사항이 있으시면 이슈를 생성해 주세요.

## 🎯 사용 사례

### 🏢 기업 및 연구기관
- **로봇 서비스 설계**: MBTI 기반 맞춤형 로봇 상호작용 인터페이스 개발
- **사용자 경험 연구**: 다양한 성향의 사용자 그룹별 로봇 선호도 분석
- **제품 개발**: MBTI 분석 결과를 활용한 로봇 기능 및 UI/UX 최적화

### 🏥 의료 및 케어 분야
- **환자 맞춤형 서비스**: 환자의 MBTI에 따른 의료 로봇 상호작용 방식 조정
- **치료 효과 분석**: MBTI별 로봇 치료 프로그램 효과성 평가
- **케어 로봇 개발**: 개인 성향을 고려한 케어 로봇 서비스 설계

### 🎓 교육 및 학습 분야
- **개인화 학습**: 학습자의 MBTI에 맞는 교육 로봇 상호작용 방식 제공
- **학습 효과 분석**: MBTI별 로봇 기반 학습 효과 및 선호도 분석
- **교육 콘텐츠 개발**: 성향별 맞춤형 교육 로봇 콘텐츠 설계

## 📈 분석 결과 활용 가이드

### 🔍 히트맵 분석 활용
- **그룹별 특성 파악**: 연령대, 성별, 직업별 로봇 상호작용 선호도 차이 분석
- **타겟 사용자 식별**: 특정 MBTI 유형이 집중된 그룹 식별 및 맞춤 서비스 설계
- **서비스 개선**: 통계적 유의성 분석을 통한 객관적 서비스 개선 방향 도출

### 🔄 변화 패턴 분석 활용
- **사용자 적응 과정**: 로봇 사용 경험에 따른 선호도 변화 패턴 추적
- **서비스 최적화**: 변화 패턴을 고려한 적응형 로봇 서비스 개발
- **장기 전략 수립**: MBTI 변화 트렌드를 반영한 로봇 서비스 로드맵 수립

### 🌐 네트워크 분석 활용
- **사용자 세그멘테이션**: MBTI 클러스터 기반 사용자 그룹 분류
- **서비스 우선순위**: 중심 허브 유형 중심의 서비스 개발 우선순위 설정
- **다양성 전략**: 희소 유형 사용자 유입을 위한 다양성 확대 전략 수립

---

**버전**: 3.0.0 ⭐ **AI 자동 해석 시스템 탑재**  
**최종 업데이트**: 2024년 12월  
**개발자**: ProjHRI Team

### 🏆 주요 성과
- ✅ **16가지 MBTI 유형** 완전 지원
- ✅ **6가지 장소별 특화** 설문 시스템
- ✅ **7가지 AI 자동 해석** 기능 구현
- ✅ **실시간 데이터 분석** 및 시각화
- ✅ **통계적 유의성 검증** 기능 제공
- ✅ **사용자 친화적 인터페이스** 구현
